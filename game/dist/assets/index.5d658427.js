var oe=Object.defineProperty,ae=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var H=(n,e,t)=>e in n?oe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,h=(n,e)=>{for(var t in e||(e={}))le.call(e,t)&&H(n,t,e[t]);if(Z)for(var t of Z(e))de.call(e,t)&&H(n,t,e[t]);return n},E=(n,e)=>ae(n,re(e));var L=(n,e,t)=>(H(n,typeof e!="symbol"?e+"":e,t),t);import{G as J,N as Q,T as w,V as ce,a as j,I as ee,C as p,S as f,D as P,b as B,f as q,c as K,R as he,w as ue,A as ge,i as we,s as pe}from"./vendor.276dc388.js";const Te=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}};Te();class Ee{constructor(e){this.app=e,this.stage=e.stage,this.scenes={},this.activeScene=""}add(e,t){t.sceneManager=this,this.scenes[e]=t}display(e){const t=this.scenes[e];t.loaded||t.load(),this.activeScene!==e&&this.activeScene!==""&&this.scenes[this.activeScene].destroy(),this.stage.addChild(t.container),this.activeScene=e}redraw(){const e=this.scenes[this.activeScene];e.destroy(),e.load(),this.stage.addChild(e.container)}}class Se{constructor(e){L(this,"app");L(this,"resouces");L(this,"container");L(this,"sceneManager");L(this,"loaded");L(this,"displayObjects");this.app=e.app,this.resources=e.resources,this.loaded=!1,this.displayObjects={}}destroy(){this.container.destroy(),this.loaded=!1,this.displayObjects={}}load(){throw new Error("Not Implemented")}draw(){throw new Error("Not Implemented")}}class U extends Se{constructor(e){super(e);L(this,"store");L(this,"tiles");L(this,"titles");this.store=e.store,this.tiles=this.resources["assets/tiles/tiles.json"].spritesheet.textures,this.titles=this.resources["assets/titles/titles.json"].spritesheet.textures}}const g={fontFamily:"Ghoulish",fontSize:36,fill:"white",stroke:"black",strokeThickness:3,dropShadow:!0,dropShadowBlur:3,dropShadowDistance:3},W={gray:6052956,green:6205522,yellow:13943620},Ce=new J({outerStrength:0,innerStrength:2,color:0,distance:30}),y=(n,e)=>{const t=new Q(n,15,15,15,15);t.interactive=!0,t.buttonMode=!0,t.down=!1,e.width&&(t.width=e.width),e.height&&(t.height=e.height);const i=e.filters?e.filters:[];i.length&&(t.filters=i);const s=()=>{t.down=!0,t.filters=[...i,Ce]},o=()=>{t.down&&(t.down=!1,t.filters=[...i])};if(t.on("pointerdown",s),t.on("pointerup",o),t.on("pointerout",o),e.labelText){const a=e.textStyle?e.textStyle:g,d=new w(e.labelText,a);t.addChild(d),d.anchor.set(.5),e.width||(t.width=d.width+75),d.position.set(t.width/2,t.height/2)}return t},u={PUG:"PUG",BUTTERFLY:"BUTTERFLY",TURTLE:"TURTLE",KITTEN:"KITTEN",ORCA:"ORCA",ELK:"ELK",PENGUIN:"PENGUIN",DUCKLING:"DUCKLING",GORILLA:"GORILLA",LION:"LION",PANDA:"PANDA",ELEPHANT:"ELEPHANT",BEAR:"BEAR",SHARK:"SHARK",BLOBFISH:"BLOBFISH",NAKEDMOLERAT:"NAKEDMOLERAT"},fe=[u.PUG,u.BUTTERFLY,u.TURTLE,u.KITTEN,u.ORCA,u.ELK,u.PENGUIN,u.DUCKLING,u.GORILLA,u.LION,u.PANDA,u.ELEPHANT,u.BEAR,u.SHARK,u.BLOBFISH,u.NAKEDMOLERAT],te={[u.PUG]:"pugTile.png",[u.BUTTERFLY]:"butterflyTile.png",[u.TURTLE]:"turtleTile.png",[u.KITTEN]:"kittenTile.png",[u.ORCA]:"orcaTile.png",[u.ELK]:"elkTile.png",[u.PENGUIN]:"penguinTile.png",[u.DUCKLING]:"ducklingTile.png",[u.GORILLA]:"gorillaTile.png",[u.LION]:"lionTile.png",[u.PANDA]:"pandaTile.png",[u.ELEPHANT]:"elephantTile.png",[u.BEAR]:"bearTile.png",[u.SHARK]:"sharkTile.png",[u.BLOBFISH]:"blobfishTile.png",[u.NAKEDMOLERAT]:"nakedmoleratTile.png"},_="wager",A={SET_SELECTED_GUESS_KEY:"SET_SELECTED_GUESS_KEY",SET_GUESS_AT_INDEX:"SET_GUESS_AT_INDEX",SET_RENTALS:"SET_RENTALS",CLEAR_GUESS_BOARD:"CLEAR_GUESS_BOARD",SET_WAGER_INCREMENT:"SET_WAGER_INCREMENT",INCREMENT_WAGER:"INCREMENT_WAGER",DECREMENT_WAGER:"DECREMENT_WAGER"},k={GUESS_TILES:"GUESS_TILES",TOTAL_GUESSES:"TOTAL_GUESSES"},Ae={namespaced:!0,state:()=>({selectedGuessKey:null,guessBoard:Array.from({length:50},()=>null),wager:1e3,wagerIncrement:1e3,wagerMin:1,wagerMax:2e5,rentals:null,guessTileTextures:E(h({},te),{COMMON:"commonTile.png",UNCOMMON:"uncommonTile.png",RARE:"rareTile.png",SUPER_RARE:"superrareTile.png",EPIC:"epicTile.png"})}),mutations:{[A.SET_SELECTED_GUESS_KEY]:(n,e)=>{n.selectedGuessKey=e},[A.SET_RENTALS]:(n,e)=>{n.rentals=h({},e)},[A.CLEAR_GUESS_BOARD]:n=>{n.guessBoard=Array.from({length:50},()=>null)},[A.SET_GUESS_AT_INDEX]:(n,{index:e,guess:t})=>{n.guessBoard[e]=t},[A.SET_WAGER_INCREMENT]:(n,e)=>{n.wagerIncrement=e},[A.INCREMENT_WAGER]:n=>{n.wager+=n.wagerIncrement,n.wager>n.wagerMax&&(n.wager=n.wagerMax)},[A.DECREMENT_WAGER]:n=>{n.wager-=n.wagerIncrement,n.wager<n.wagerMin&&(n.wager=n.wagerMin)}},getters:{[k.GUESS_TILES]:n=>{const e=["COMMON","UNCOMMON","RARE","SUPER_RARE","EPIC"].map(t=>({key:t,textureKey:n.guessTileTextures[t]}));return fe.map(t=>({key:t,textureKey:n.guessTileTextures[t]})).concat(e)},[k.TOTAL_GUESSES]:n=>n.guessBoard.filter(e=>e!==null).length}},m={SET_SESSION:"SET_SESSION",SET_LAST_BOARD:"SET_LAST_BOARD",SET_BALANCE:"SET_BALANCE",SET_ROUND_RESULTS:"SET_ROUND_RESULTS",SET_WALLET:"SET_WALLET",SET_ROLLOVER:"SET_ROLLOVER",SET_TXN_PENDING:"SET_TXN_PENDING",SET_LOADING_TEXT:"SET_LOADING_TEXT"},G={CONNECT:"CONNECT",PLAY:"PLAY",WITHDRAW:"WITHDRAW",FETCH_SESSION_DATA:"FETCH_SESSION_DATA"},me=new ce.Store({state:()=>({session:null,roundResults:null,txnPending:!1,loadingText:"Loading..."}),mutations:{[m.SET_SESSION]:(n,e)=>{n.session=h({},e)},[m.SET_BALANCE]:(n,e)=>{n.session.balance=e},[m.SET_ROUND_RESULTS]:(n,e)=>{n.roundResults=h({},e)},[m.SET_WALLET]:(n,e)=>{n.wallet=e},[m.SET_ROLLOVER]:(n,e)=>{n.session.rollover=e},[m.SET_TXN_PENDING]:(n,e)=>{n.txnPending=e},[m.SET_LOADING_TEXT]:(n,e)=>{n.loadingText=e}},actions:{[G.CONNECT]:({commit:n})=>new Promise((e,t)=>{const{walletAddress:i}=window;if(i===void 0)alert("No Wallet found - contact devs"),t();else{n(m.SET_WALLET,i);const s={url:`/hatchscratcher/connect/${i}`,baseURL:"https://games.hatchscratcher.cryptozooarcade.com/server",method:"POST",withCredentials:!0};j(s).then(o=>{n(m.SET_SESSION,o.data),e()}).catch(t)}}),[G.FETCH_SESSION_DATA]:({commit:n})=>new Promise((e,t)=>{j({url:"/hatchscratcher/session",baseURL:"https://games.hatchscratcher.cryptozooarcade.com/server",method:"GET",withCredentials:!0}).then(s=>n(m.SET_SESSION,s.data)).then(()=>e()).catch(t)}),[G.PLAY]:({commit:n,state:e})=>new Promise((t,i)=>{const s={baseURL:"https://games.hatchscratcher.cryptozooarcade.com/server",url:"/hatchscratcher/session/play",method:"POST",withCredentials:!0,data:{bet:e.wager.wager,board:e.wager.guessBoard}};j(s).then(o=>{const{results:a,user:d}=o.data;n(m.SET_ROUND_RESULTS,a),n(m.SET_BALANCE,d.balance),n(m.SET_ROLLOVER,d.rollover),t()}).catch(i)}),[G.WITHDRAW]:({dispatch:n,commit:e,state:t})=>new Promise((i,s)=>{j({baseURL:"https://games.hatchscratcher.cryptozooarcade.com/server",url:"/hatchscratcher/session/withdraw",method:"POST",withCredentials:!0}).then(a=>{const{hash:d}=a.data;alert("Transaction Hash: "+d)}).then(()=>n(G.FETCH_SESSION_DATA)).then(()=>i()).catch(s)})},modules:{[_]:Ae}}),N={popclick:"/game/assets/sounds/popclick.wav",choice:"/game/assets/sounds/choice.wav",remove:"/game/assets/sounds/remove.wav",fairy:"/game/assets/sounds/fairy.wav",win:"/game/assets/sounds/win.wav"};Object.values(N).forEach(n=>{ee.add(n,n)});const R=async n=>{ee.play(n)};class Ne extends U{constructor(e){super(e)}load(){this.container=new p;const e=new f(this.resources["assets/images/splash.png"].texture);this.container.addChild(e);const t=y(this.tiles["button9s.png"],{labelText:"Login",filters:[new P]});this.container.addChild(t),t.position.set(e.width/2-t.width/2,e.height/2+150),t.on("pointerup",()=>{R(N.popclick),this.store.commit(m.SET_LOADING_TEXT,`Loading Account...
${window.walletAddress}`),this.sceneManager.display("loading"),this.store.dispatch(G.CONNECT).then(()=>this.sceneManager.display("wager")).catch(i=>{i.response&&alert(i.response.data),this.sceneManager.display("connect")})})}}class Re extends U{constructor(e){super(e)}load(){this.container=new p;const e=new f(this.resources["assets/images/background.png"].texture);this.container.addChild(e);const t=this.buildModal();this.container.addChild(t),t.position.set(e.width/2-t.width/2,e.height/2-t.height/2+30)}buildModal(){const e=new p;e.filters=[new P({distance:20,blur:5})];const t=new f(this.resources["assets/images/results.png"].texture);e.addChild(t);const i=this.store.state.roundResults.resultsBoard,s={BASE_ANIMALS:{title:"Animals",hits:i.filter(r=>r.hitType==="ANIMAL").length,sum:i.filter(r=>r.hitType==="ANIMAL").reduce((r,S)=>new B(r).add(S.won),0)},EPIC:{title:"Epics",hits:i.filter(r=>r.hitType==="EPIC").length,sum:i.filter(r=>r.hitType==="EPIC").reduce((r,S)=>new B(r).add(S.won),0)},SUPER_RARE:{title:"Super Rares",hits:i.filter(r=>r.hitType==="SUPER_RARE").length,sum:i.filter(r=>r.hitType==="SUPER_RARE").reduce((r,S)=>new B(r).add(S.won),0)},RARE:{title:"Rares",hits:i.filter(r=>r.hitType==="RARE").length,sum:i.filter(r=>r.hitType==="RARE").reduce((r,S)=>new B(r).add(S.won),0)},UNCOMMON:{title:"Uncommons",hits:i.filter(r=>r.hitType==="UNCOMMON").length,sum:i.filter(r=>r.hitType==="UNCOMMON").reduce((r,S)=>new B(r).add(S.won),0)},COMMON:{title:"Commons",hits:i.filter(r=>r.hitType==="COMMON").length,sum:i.filter(r=>r.hitType==="COMMON").reduce((r,S)=>new B(r).add(S.won),0)}};Object.keys(s).forEach((r,S)=>{const{title:M,hits:x,sum:ie}=s[r],D=new p,ne=new w(M,E(h({},g),{fontSize:28}));D.addChild(ne);const $=new w(x,E(h({},g),{fontSize:28,fill:x===0?W.gray:W.green}));D.addChild($),$.position.set(245,0);const z=new w(`+ ${Number(ie).toLocaleString("en-US")} $ZOO`,E(h({},g),{fontSize:28,fill:x===0?W.gray:W.yellow}));D.addChild(z),z.position.set($.x+270-z.width,0),e.addChild(D),D.position.set(90,150+D.height*S+S)});const o=this.store.state.roundResults.totalBet,a=this.store.state.roundResults.squaresBet,d=new B(o).div(a),c=new w("Total Wagered",E(h({},g),{fontSize:28}));e.addChild(c),c.position.set(90,370);const l=new w(`${Number(o).toLocaleString("en-US")} $ZOO`,E(h({},g),{fontSize:28}));e.addChild(l),l.position.set(610-l.width,370);const T=new w(`${Number(d).toLocaleString("en-US")} $ZOO/sq`,E(h({},g),{fontSize:28}));e.addChild(T),T.position.set(610-T.width,405);const C=Object.values(s).reduce((r,S)=>new B(r).add(S.sum),0),O=new w(`${Number(C).toLocaleString("en-US")} $ZOO`,E(h({},g),{fontSize:64,strokeThickness:6}));e.addChild(O),O.position.set(e.width/2-O.width/2+10,600);const b=y(this.tiles["button9s.png"],{labelText:"Play Again",filters:[new P]});return e.addChild(b),b.position.set(e.width/2-b.width/2,680),b.on("pointerdown",()=>{R(N.popclick),this.sceneManager.display("wager")}),e}}const X=new q.ColorMatrixFilter;X.brightness(.5);X.blackAndWhite(!0);const Y=new q.NoiseFilter;Y.noise=.1;Y.resolution=4;const v=new K;v.beginFill(16777215);v.drawCircle(0,0,30);v.endFill();v.cacheAsBitmap=!0;class Oe extends U{constructor(e){super(e);L(this,"winningBoard")}load(){this.container=new p;const e=this.buildScene();this.container.addChild(e)}buildScene(){const e=new p,t=new f(this.resources["assets/images/background.png"].texture);e.addChild(t);const i=new f(this.titles["title.png"]);e.addChild(i),i.position.set(20,0);const s=new w("Start Scratching!",E(h({},g),{fontSize:72}));e.addChild(s),s.anchor.set(.5),s.position.set(this.app.screen.width/2,230);const o=new K;o.lineStyle(3,0,.7),o.beginFill(0,.25),o.drawRoundedRect(26,340,715,365,8),o.endFill(),e.addChild(o);const a=this.buildScratcher();e.addChild(a),a.position.set(this.app.screen.width/2-a.width/2,350);const d=y(this.tiles["button9s.png"],{labelText:"View Results",textStyle:E(h({},g),{fontSize:64}),height:120});return e.addChild(d),d.position.set(this.app.screen.width/2-d.width/2,800),d.on("pointerdown",this.scratchAll.bind(this)),e}buildWinningBoard(){const e=this.store.state.roundResults,t=e.generatedBoard.board,i=e.resultsBoard,s=new p,o=new p;s.addChild(o),o.filters=[Y];const a=5,d=10;for(let c=0;c<t.length;c++){const l=new f(this.tiles[te[t[c]]]);if(i[c].hitType===null)l.filters=[X];else{const T=new w(i[c].multiplier,E(h({},g),{fill:W.yellow,fontSize:32}));T.anchor.set(.5),l.addChild(T),T.position.set(l.width/2,l.height-T.height/2)}o.addChild(l),l.position.set(c%d*l.width+c%d*a,Math.floor(c/d)*l.height+Math.floor(c/d)*a)}return s}buildScratchableBoard(){const e=new p,t=new p;e.addChild(t);const i=5,s=10;for(let o=0;o<50;o++){const a=new f(this.tiles["eggTile.png"]);t.addChild(a),a.position.set(o%s*a.width+o%s*i,Math.floor(o/s)*a.height+Math.floor(o/s)*i)}return e}buildScratcher(){const e=new p,t=this.buildScratchableBoard();e.addChild(t),this.winningBoard=this.buildWinningBoard(),e.addChild(this.winningBoard);const i=he.create({width:this.winningBoard.width,height:this.winningBoard.height}),s=new f(i);e.addChild(s),this.winningBoard.mask=s;let o=!1;const a=l=>{o&&(s.toLocal(l.data.global,null,v),this.app.renderer.render(v,{renderTexture:i,clear:!1}))},d=l=>{o=!0,a(l)},c=l=>{o=!1};return s.interactive=!0,s.on("pointerdown",d),s.on("pointerup",c),s.on("pointermove",a),e}scratchAll(){R(N.win),this.sceneManager.display("results")}}class be extends U{constructor(e){super(e)}load(){this.container=new p;const e=new f(this.resources["assets/images/splash.png"].texture);this.container.addChild(e);const t=new w("Loading...",E(h({},g),{fontSize:48}));this.container.addChild(t),t.anchor.set(.5),t.position.set(e.width/2+10,e.height/2+150),this.loaded=!0}}const _e=new P,V=new J({distance:25,color:16771584,innerStrength:4,outerStrength:0}),se=new q.ColorMatrixFilter;se.brightness(.3);se.blackAndWhite(!0);class Le extends U{constructor(e){super(e)}load(){this.setupStore(),this.displayObjects={rentalText:{},guessBoardTiles:[],selectedGuessKeyButton:null,selectedIncrementorButton:null,totalValueText:null},this.container=new p;const e=new f(this.resources["assets/images/background.png"].texture);this.container.addChild(e);const t=new f(this.titles["title.png"]);this.container.addChild(t),t.position.set(20,0);const i=this.buildGuessButtons();this.container.addChild(i),i.position.set(e.width/2-i.width/2,155);const s=this.buildGuessBoard();this.container.addChild(s),s.position.set(e.width/2-s.width/2,385);const o=this.buildWagerContainer();this.container.addChild(o),o.position.set(e.width/2-s.width/2,770);const a=this.buildWalletContainer();this.container.addChild(a),a.scale.set(.7),a.position.set(30,e.height-a.height)}setupStore(){this.store.commit([_,A.SET_SELECTED_GUESS_KEY].join("/"),null)}buildGuessButtons(){const e=new p;e.filters=[_e];const t=5,i=8,s=this.store.getters[[_,k.GUESS_TILES].join("/")];for(let a=0;a<s.length;a++){const d=s[a],c=new f(this.tiles[d.textureKey]);c.interactive=!0,c.buttonMode=!0,c.filters=[],e.addChild(c),c.position.set(a%i*c.width+a%i*t,Math.floor(a/i)*c.height+Math.floor(a/i)*t);const l=()=>{d.key===this.store.state.wager.selectedGuessKey?(c.filters=[],this.store.commit([_,A.SET_SELECTED_GUESS_KEY].join("/"),null),this.displayObjects.selectedGuessKeyButton=null,R(N.remove)):(this.displayObjects.selectedGuessKeyButton!==null&&(this.displayObjects.selectedGuessKeyButton.filters=[]),c.filters=[V],this.store.commit([_,A.SET_SELECTED_GUESS_KEY].join("/"),d.key),this.displayObjects.selectedGuessKeyButton=c,R(N.choice))};c.on("pointerdown",l)}const o=y(this.tiles["button9s.png"],{labelText:"Clear Board",width:this.tiles["animal.png"].width*3+t*2});return e.addChild(o),o.position.set(e.width-o.width,e.height-o.height),o.on("pointerup",()=>{R(N.remove),this.store.commit([_,A.CLEAR_GUESS_BOARD].join("/")),this.sceneManager.redraw()}),e}buildGuessBoard(){const e=new p;let t=!1;const i=new K;i.lineStyle(3,0,.7),i.beginFill(0,.25),i.drawRoundedRect(0,0,715,365,8),i.endFill(),e.addChild(i);const s=new p;e.addChild(s),s.position.set(10,10);const o=5,a=10,d=this.store.state.wager.guessBoard,c=this.store.state.wager.guessTileTextures;for(let l=0;l<d.length;l++){const T=d[l]===null?this.tiles["questionTile.png"]:this.tiles[c[d[l]]],C=new f(T);C.interactive=!0,C.buttonMode=!0,s.addChild(C),C.position.set(l%a*C.width+l%a*o,Math.floor(l/a)*C.height+Math.floor(l/a)*o);const O=()=>{t=!0,b()},b=()=>{if(t){const{selectedGuessKey:r,guessTileTextures:S}=this.store.state.wager,M=this.displayObjects.guessBoardTiles[l],x=this.store.state.wager.guessBoard[l];r===null||x===r?(this.store.commit([_,A.SET_GUESS_AT_INDEX].join("/"),{index:l,guess:null}),M.texture=this.tiles["questionTile.png"],R(N.remove)):(this.store.commit([_,A.SET_GUESS_AT_INDEX].join("/"),{index:l,guess:r}),M.texture=this.tiles[S[r]],R(N.popclick)),this.refreshTotalText()}};C.on("pointerdown",O),C.on("pointerup",()=>{t=!1}),C.on("pointerover",b),this.displayObjects.guessBoardTiles.push(C)}return i.interactive=!0,i.on("pointerdown",()=>t=!0),i.on("pointerup",()=>t=!1),i.on("pointerout",l=>{i.containsPoint(l.data.global)||(t=!1)}),e}buildWagerContainer(){const e=new p,t=new K;t.lineStyle(3,0,.7),t.beginFill(0,.25),t.drawRoundedRect(0,0,715,185,8),t.endFill(),e.addChild(t);const i=new p;e.addChild(i),i.position.set(10,0);const s=new p;i.addChild(s);const o=new w("Wager:",g);s.addChild(o);const a=new w("NaN",E(h({},g),{fill:9689064}));s.addChild(a),a.position.set(o.width+5,o.y+2),this.displayObjects.wagerText=a;const d=new w("$ZOO/sq",E(h({},g),{fontSize:24}));s.addChild(d),d.position.set(a.x+a.width+5,a.y+a.height-d.height-3),this.displayObjects.wagerSubtitle=d;const c=new w("Total:",g);s.addChild(c),c.y=o.y+o.height-5;const l=new w("X $ZOO",E(h({},g),{fontSize:24}));s.addChild(l),l.y=c.y+c.height-l.height-3,l.x=c.x+c.width+10,this.displayObjects.totalValueText=l;const T=new p;e.addChild(T),T.x=5,T.y=s.y+s.height;const C=y(this.tiles["button9s.png"],{labelText:"--",textStyle:E(h({},g),{fontSize:72}),width:155,height:50});T.addChild(C),C.on("pointerdown",()=>{R(N.popclick),this.store.commit([_,A.DECREMENT_WAGER].join("/")),this.refreshWagerText()});const O=y(this.tiles["button9s.png"],{labelText:"++",textStyle:E(h({},g),{fontSize:72}),width:155,height:50});T.addChild(O),O.x=C.width+5,O.on("pointerdown",()=>{R(N.popclick),this.store.commit([_,A.INCREMENT_WAGER].join("/")),this.refreshWagerText()}),[{title:"1",value:1},{title:"100",value:100},{title:"1K",value:1e3,active:!0},{title:"10K",value:1e4}].forEach((S,M)=>{const x=this.buildWagerButton(S.value,S.title,{width:75,height:50});T.addChild(x),x.position.set(M*75+M*5,C.y+C.height+5)});const r=y(this.tiles["button9s.png"],{labelText:"Begin Round",textStyle:E(h({},g),{fontSize:64}),height:e.height-20,width:370});return e.addChild(r),r.position.set(e.width-r.width-13,10),r.on("pointerdown",()=>{R(N.popclick),this.store.commit(m.SET_LOADING_TEXT,"We're Getting Ready!"),this.sceneManager.display("loading"),this.store.dispatch(G.PLAY).then(()=>{R(N.fairy),this.sceneManager.display("scratcher")}).catch(S=>{S.response&&alert(S.response.data),this.sceneManager.display("wager")})}),this.refreshWagerText(),e}buildWalletContainer(){const e=new p,t=y(this.tiles["button9s.png"],{labelText:"Withdraw"});e.addChild(t),t.on("pointerup",()=>{R(N.popclick),this.store.commit(m.SET_LOADING_TEXT,"Processing Withdrawal..."),this.sceneManager.display("loading"),this.store.dispatch(G.WITHDRAW).catch(T=>{T.response&&alert(T.response.data)}).finally(()=>this.sceneManager.display("wager"))});const{balance:i}=this.store.state.session,s=this.store.state.session._id,o=Number(i).toLocaleString("en-US"),a=new w(`Balance: ${o} $ZOO | Wallet: ${s.slice(0,5)}...${s.slice(s.length-4)}`,h({},g));e.addChild(a),a.position.set(t.x+t.width+10,t.y-5);const{rollover:d}=this.store.state.session,c=Number(d).toLocaleString("en-US"),l=new w(`Rollover: ${c} $ZOO Remaining`,h({},g));return e.addChild(l),l.position.set(t.x+t.width+10,a.y+a.height),e}refreshWagerText(){const e=this.displayObjects.wagerText,t=this.displayObjects.wagerSubtitle,i=Number(this.store.state.wager.wager).toLocaleString("en-US");e.text=i,t.position.set(e.x+e.width+5,e.y+e.height-t.height-3),this.refreshTotalText()}refreshTotalText(){const e=this.displayObjects.totalValueText,t=this.store.getters[[_,k.TOTAL_GUESSES].join("/")];e.text=(this.store.state.wager.wager*t).toLocaleString("en-US")+" $ZOO"}rebuildLastBoard(){this.store.state.lastBoard.forEach((e,t)=>{this.displayObjects.guessBoardTiles[t].texture=e===null?this.tiles["questionTile.png"]:this.tiles[this.guessTextures[e]],this.guessBoard[t]=e})}buildWagerButton(e,t,i){const s=new Q(this.tiles["button9s.png"],15,15,15,15);s.interactive=!0,s.buttonMode=!0,s.down=!1,i.width&&(s.width=i.width),i.height&&(s.height=i.height),e===this.store.state.wager.wagerIncrement&&(s.filters=[V],this.displayObjects.selectedIncrementorButton=s);const o=new w(t,E(h({},g),{fontSize:30}));s.addChild(o),o.anchor.set(.5),o.position.set(s.width/2,s.height/2);const a=()=>{R(N.choice),this.store.commit([_,A.SET_WAGER_INCREMENT].join("/"),e),this.displayObjects.selectedIncrementorButton.filters=[],this.displayObjects.selectedIncrementorButton=s,s.filters=[V]};return s.on("pointerdown",a),s}}class ye extends U{constructor(e){super(e)}load(){this.container=new p;const e=new f(this.resources["assets/images/splash.png"].texture);this.container.addChild(e);const t=new p;this.container.addChild(t);const i=new f(this.tiles["eggTileWhite.png"]);t.addChild(i),i.anchor.set(.5),this.app.ticker.add(o=>{i.rotation+=.1*o});const s=new w(this.store.state.loadingText,E(h({},g),{align:"center"}));t.addChild(s),s.anchor.set(.5),s.position.set(i.x,i.height+25),t.position.set(e.width/2,e.height/2+175)}}class xe extends U{constructor(e){super(e)}load(){this.container=new p;const e=new f(this.resources["assets/images/background.png"].texture);this.container.addChild(e);const t=new f(this.resources["assets/images/rollover.png"].texture);this.container.addChild(t),t.filters=[new P],t.position.set(e.width/2-t.width/2,e.height/2-t.height/2+50);const i=new w(`You must wager the entirety of
your deposit prior to
withdrawing your game balance`,E(h({},g),{align:"center"}));t.addChild(i),i.position.set(t.width/2-i.width/2,140);const s=new p;t.addChild(s),s.position.set(85,276);const o=new w("Total Deposits",h({},g));s.addChild(o);const a=new w("NAN $ZOO",E(h({},g),{align:"right"}));s.addChild(a),a.position.set(525-a.width,o.y);const d=new p;t.addChild(d),d.position.set(85,336);const c=new w("Total Wagered",h({},g));d.addChild(c);const l=new w("NAN $ZOO",E(h({},g),{align:"right"}));d.addChild(l),l.position.set(525-l.width,c.y);const T=new p;t.addChild(T),T.position.set(85,396);const C=new w("Remaining",h({},g));T.addChild(C);const O=new w("NAN $ZOO",E(h({},g),{align:"right"}));T.addChild(O),O.position.set(525-O.width,C.y);const b=y(this.tiles["button9s.png"],{labelText:"Continue"});t.addChild(b),b.position.set(t.width/2-b.width/2,600)}}ue.exports.load({custom:{families:["Ghoulish"],urls:["/game/assets/GhoulFriAOE.ttf"]}});const F=new ge({width:768,height:1024,resolution:1,backgroundColor:"0x3F9BD4"}),Be=document.querySelector("#canvas-container");Be.appendChild(F.view);const Ge=we()?"WebGL":"canvas";pe(Ge);const I=new Ee(F);F.loader.add("assets/images/background.png","/game/assets/images/background.png").add("assets/images/results.png","/game/assets/images/results.png").add("assets/images/rollover.png","/game/assets/images/rollover.png").add("assets/images/splash.png","/game/assets/images/splash.png").add("assets/tiles/tiles.json","/game/assets/tiles/tiles.json").add("assets/titles/titles.json","/game/assets/titles/titles.json").add("assets/previews/previews.json","/game/assets/previews/previews.json").load(Ie);function Ie(n,e){const t={app:F,resources:e,store:me};I.add("splash",new be(t)),I.add("connect",new Ne(t)),I.add("wager",new Le(t)),I.add("scratcher",new Oe(t)),I.add("results",new Re(t)),I.add("loading",new ye(t)),I.add("rollover",new xe(t)),Me()}async function Me(){I.display("connect")}window.addEventListener("message",n=>{const{walletAddress:e}=n.data;e&&(window.walletAddress=e)});
